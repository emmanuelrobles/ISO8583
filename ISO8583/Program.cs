using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ISO8583.Exceptions;
using ISO8583.ISO8385;

namespace ISO8583
{
    class Program
    {
        static void Main(string[] args)
        {
//            string message =
//                "020042000400000000021612345678901234560609173030123456789ABC1000123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789";

//                string message =
//                    "0200B2200000001000000000000000800000201234000000010000011072218012345606A5DFGR057ABCDEFGHIJ";


//            string message =
//                "0200B2200000001000000000000000800000201234000000010000011072218012345606A5DFGR474001010ABCDEFGHIJ002010ABCDEFGHIJ003012ABCDEFGHIJ12004005ABCDE005050ABCDEFGHIJerererjejrjekrjkrjkdfjdkgdjhfsjdhsfgfg12006020ABCDEFGHIJerererjejr007010ABCDEFGHIJ008001A009008adfglkjh010001a011003abc012003abc013001a014040ABCDEFGHIJerererjejrABCDEFGHIJerererjejr015029ABCDEFGHIJerererjejrABCDE1234016142ABCDEFGHIJerererjejrABCDE1234fgsgsdABCDEFGHIJerererjejrABCDE1234fgsgsdABCDEFGHIJerererjejrABCDE1234fgsgsdABCDEFGHIJerererjejrABCDE1234fgsgsd12017003589018008admlkjhy071004adhe";

            string message =
                "0200B2200000001001000000000000800000201234000000010000011072218012345606A5DFGR02301190115probandofield56474001010ABCDEFGHIJ002010ABCDEFGHIJ003012ABCDEFGHIJ12004005ABCDE005050ABCDEFGHIJerererjejrjekrjkrjkdfjdkgdjhfsjdhsfgfg12006020ABCDEFGHIJerererjejr007010ABCDEFGHIJ008001A009008adfglkjh010001a011003abc012003abc013001a014040ABCDEFGHIJerererjejrABCDEFGHIJerererjejr015029ABCDEFGHIJerererjejrABCDE1234016142ABCDEFGHIJerererjejrABCDE1234fgsgsdABCDEFGHIJerererjejrABCDE1234fgsgsdABCDEFGHIJerererjejrABCDE1234fgsgsdABCDEFGHIJerererjejrABCDE1234fgsgsd12017003589018008admlkjhy071004adhe";
            

            ISO_Parser parser = new ISO_Parser(message);

            parser.Bitmap_manager.getDataElements().ToList().ForEach(Console.WriteLine);

            Console.WriteLine(parser.Bitmap_manager.getBitmapCount());

            Console.WriteLine(parser.Code);
        }
    }
}